## Домашнее задание к занятию "3.1. Работа в терминале. Лекция 1"


### Задание ###
1. С помощью базового файла конфигурации запустите Ubuntu 20.04 в VirtualBox посредством Vagrant:

 - Создайте директорию, в которой будут храниться конфигурационные файлы Vagrant. В ней выполните vagrant init. Замените содержимое Vagrantfile по умолчанию следующим:

 Vagrant.configure("2") do |config|
 	config.vm.box = "bento/ubuntu-20.04"
 end
 - Выполнение в этой директории vagrant up установит провайдер VirtualBox для Vagrant, скачает необходимый образ и запустит виртуальную машину.

 - vagrant suspend выключит виртуальную машину с сохранением ее состояния (т.е., при следующем vagrant up будут запущены все процессы внутри, которые работали на момент вызова suspend), vagrant halt выключит виртуальную машину штатным образом.

2. Ознакомьтесь с графическим интерфейсом VirtualBox, посмотрите как выглядит виртуальная машина, которую создал для вас Vagrant, какие аппаратные ресурсы ей выделены. Какие ресурсы выделены по-умолчанию?


### ANSWER ###
CPU: 2
RAM: 1024Mb
SSD: 64



3. Ознакомьтесь с возможностями конфигурации VirtualBox через Vagrantfile: документация. Как добавить оперативной памяти или ресурсов процессора виртуальной машине?


### ANSWER ###
Vagrant.configure("2") do |config|
	# Image name
	config.vm.box = "bento/ubuntu-20.04"
	config.vm.provider "virtualbox" do |v|
		# Name VM
		v.name = "ubuntu_devops"
		# Customize the amount of memory on the VM:
		v.memory = "1024"
		# Customize the amount of CPU on the VM:
		v.cpus = 1
		# the VM is modified to have a host CPU execution cap of 50%, meaning that no matter how much CPU is used in the VM, no more than 50% would be used on your own host machine
		v.customize ["modifyvm", :id, "--cpuexecutioncap", "50"]
	end
### END OF ANSWER ###



4. Команда vagrant ssh из директории, в которой содержится Vagrantfile, позволит вам оказаться внутри виртуальной машины без каких-либо дополнительных настроек. Попрактикуйтесь в выполнении обсуждаемых команд в терминале Ubuntu.


### ANSWER ###
Успешно зашел в сессию SSH.
### END OF ANSWER ###



5. Ознакомьтесь с разделами man bash, почитайте о настройках самого bash:

 - какой переменной можно задать длину журнала history, и на какой строчке manual это описывается?


### ANSWER ###
HISTFILESIZE строка 619
### END OF ANSWER ###



 - что делает директива ignoreboth в bash?


### ANSWER ###
Убирает из истории повторяющиеся команды
### END OF ANSWER ###



6. В каких сценариях использования применимы скобки {} и на какой строчке man bash это описано?


### ANSWER ###
Можно из зарезервированных слов сделать, например переменную. Строка 140
{} означают списки. Строка 205
{1..9} диапазон значений - 798
Можно обозначать переменную. Строка 469, 492
### END OF ANSWER ###



7. С учётом ответа на предыдущий вопрос, как создать однократным вызовом touch 100000 файлов? Получится ли аналогичным образом создать 300000? Если нет, то почему?


### ANSWER ###
touch f-{1..100000}.txt

При создании файлов через “touch f-{1..300000}.txt” - возникает ошибка “Argument list too long”
Скорее всего получится создать через цикл, но ждать очень долго придется:
for f in f-{1..300000}; do touch $f; done
Проще разбить на более маленькие диапазоны.
### END OF ANSWER ###



8. В man bash поищите по /\[\[. Что делает конструкция [[ -d /tmp ]]


### ANSWER ###
When used with [[, the < and > operators sort lexicographically using the current locale.  The test command sorts using ASCII ordering.
-d file     True if file exists and is a directory.
Если директория указанная /tmp существует, то результатом работы будет истина.

Пример:
if [[ -d /tmp ]]
then
echo "directory exists"
else
echo "directory does not exist"
fi

Результатом работы будет: “directory exists”.


В документации сказано: "-d file - Истинно, если файл существует и является директорией."
Мы знаем, что 1 - true, а 0 - false.

[[ -d /tmp ]];echo $?		# Я знаю, что /tmp точно существует и является директорией. Т.е. скрипт должен вернуть true.
[[ -d /tmp1 ]];echo $?		# Такой директории не существует. Т.е. скрипт должен вернуть false.

Далее мы выводим значение переменной $?. Эта переменная означает код возврата. Если вывод успешный, то выведет "0", при ошибке выведет любую число отличное от нуля.
### END OF ANSWER ###



9. Сделайте так, чтобы в выводе команды type -a bash первым стояла запись с нестандартным путем, например bash is ... Используйте знания о просмотре существующих и создании новых переменных окружения, обратите внимание на переменную окружения PATH
bash is /tmp/new_path_directory/bash
bash is /usr/local/bin/bash
bash is /bin/bash
(прочие строки могут отличаться содержимым и порядком) В качестве ответа приведите команды, которые позволили вам добиться указанного вывода или соответствующие скриншоты.


### ANSWER ###
mkdir /tmp/olol
cp /usr/bin/bash /tmp/olol/bash
export PATH=/tmp/olol:$PATH
### END OF ANSWER ###



10. Чем отличается планирование команд с помощью batch и at?


### ANSWER ###
Batch выполнится при снижении load average до 0,8. У меня выполнился при 0.33 1.05 0.76
а для at указывается время запуска:
at 11:23 -f /home/devops/date_test.sh
### END OF ANSWER ###



11. Завершите работу виртуальной машины чтобы не расходовать ресурсы компьютера и/или батарею ноутбука.


### ANSWER ###
vagrant halt
### END OF ANSWER ###


